<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="../polymer/polymer.html">

<dom-module id="idecanarias-ol3">
    <script src="//cdnjs.cloudflare.com/ajax/libs/proj4js/2.3.3/proj4.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/ol3/3.3.0/ol.js"></script>
    <template>
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/ol3/3.3.0/ol.css" type="text/css">
        <style>
            :host {
                display: block;
                position: relative;
            }
            #map {
                height: 100%;
                width: 100%;
            }
        </style>
        <div id="map"></div>
    </template>
</dom-module>

<script>
    Polymer(
      {
        is: "idecanarias-ol3",

        map: null,

        attached: function() {
            this.async(function() {
                this.initialConfig();
            });
        },

        initialConfig: function(){
            proj4.defs("EPSG:32628","+proj=utm +zone=28 +datum=WGS84 +units=m +no_defs");
            this.map = new ol.Map({
                target: this.$.map,
                layers: [
                    new ol.layer.Tile({
                        source: new ol.source.TileWMS({
                            url: "http://idecan3.grafcan.es/ServicioWMS/OrtoExpress?",
                            params: {
                                LAYERS: "ortoexpress",
                                FORMAT: "image/jpeg",
                                VERSION: "1.1.0" },
                            serverType: 'mapserver'
                        })
                    })
                ],
                view: new ol.View({
                    projection: 'EPSG:32628',
                    center: [392216.34, 3143997.71],
                    extent: [180000, 2900000, 680000, 3300000],
                    resolutions: [
                        650, 500, 250, 200,
                        75, 50, 20, 10, 5,
                        2.5, 2, 1.5, 1, 0.5, 0.2, 0.1],
                    units: 'm',
                    resolution: 650
                }),
                controls: ol.control.defaults({
                  attributionOptions: {
                    collapsible: false
                  }
                })
            });
        },
    });
</script>